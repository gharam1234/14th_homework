# í”„ë¡¬í”„íŠ¸ 401 - Task6: ë¸Œëœë“œ í•„í„° (ë°ì´í„° ë°”ì¸ë”©)

**íƒ€ì…**: Data Binding
**ì»´í¬ë„ŒíŠ¸**: phones-brand-filter
**ëª©í‘œ**: ë¸Œëœë“œë³„ í•„í„°ë§ ìƒíƒœ ê´€ë¦¬ ë° ì¹´ë“œ ë°ì´í„° ë°”ì¸ë”©

==================================================

## ì¡°ê±´

### Cursor Rules
@01-common.mdc
@04-func.mdc

### íŒŒì¼ ê²½ë¡œ
- í›…: `src/components/phones-list/hooks/use-brand-filter.hook.ts`
- TSX: `src/components/phones-list/index.brand-filter.tsx`

### ë¸Œëœë“œ ëª©ë¡
```typescript
const BRANDS = [
  { id: 'apple', label: 'Apple', icon: 'ğŸ' },
  { id: 'samsung', label: 'Samsung', icon: 'ğŸ“±' },
  { id: 'google', label: 'Google', icon: 'ğŸ”' },
  { id: 'xiaomi', label: 'Xiaomi', icon: 'âš¡' },
  { id: 'nothing', label: 'Nothing', icon: 'âŒ' },
  { id: 'sony', label: 'Sony', icon: 'ğŸ“·' },
  { id: 'motorola', label: 'Motorola', icon: 'ğŸš€' },
  { id: 'lg', label: 'LG', icon: 'âœ¨' },
  { id: 'other', label: 'ê¸°íƒ€', icon: 'ğŸ“¦' }
];
```

### ë°ì´í„° êµ¬ì¡°
```typescript
type BrandId = 'apple' | 'samsung' | 'google' | 'xiaomi' | 'nothing' | 'sony' | 'motorola' | 'lg' | 'other';

interface BrandItem {
  id: BrandId;
  label: string;
  icon: string;
  isSelected: boolean;
  count?: number;  // ê° ë¸Œëœë“œë³„ ìƒí’ˆ ê°œìˆ˜
}

interface BrandFilterState {
  selectedBrands: BrandId[];  // ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥
  filteredCards: PhoneCardItem[];
}
```

### Zustand ìŠ¤í† ì–´ ì—°ë™
```typescript
// phoneListStoreì— ë‹¤ìŒ ìƒíƒœ ì¶”ê°€
// - selectedBrands: BrandId[]
// - toggleBrand: (brandId: BrandId) => void
// - resetBrands: () => void
// - filteredCards: PhoneCardItem[]
```

==================================================

## í•µì‹¬ìš”êµ¬ì‚¬í•­

1) ë¸Œëœë“œ í•„í„° í›… êµ¬í˜„
   1-1) useBrandFilter() í›… ìƒì„±
        - Zustand ìŠ¤í† ì–´ì—ì„œ selectedBrands, toggleBrand êµ¬ë…
        - filteredCards ê³„ì‚° (ì—¬ëŸ¬ ë¸Œëœë“œ ì„ íƒ ì‹œ OR ì¡°ê±´)
   1-2) ì´ˆê¸°ê°’: selectedBrands = []
   1-3) Supabaseì—ì„œ ë°ì´í„° ì¡°íšŒ
        - ê° ë¸Œëœë“œë³„ ìƒí’ˆ ê°œìˆ˜ ê³„ì‚°

2) ë¸Œëœë“œ ë²„íŠ¼ UI ë Œë”ë§
   2-1) BrandButton ì»´í¬ë„ŒíŠ¸ ìƒì„±
   2-2) Props: { brand: BrandItem, onClick }
   2-3) ì•„ì´ì½˜ í‘œì‹œ (ì„ íƒì‚¬í•­)
   2-4) ë¹„í™œì„± ìƒíƒœ
        - ë°°ê²½: #f2f2f2 (ë¼ì´íŠ¸ ê·¸ë ˆì´)
        - í…ìŠ¤íŠ¸: #333333 (ê²€ì€ìƒ‰)
        - í…Œë‘ë¦¬: 1px solid #e0e0e0
   2-5) í™œì„± ìƒíƒœ
        - ë°°ê²½: ê²€ì€ìƒ‰ (#1c1c1c)
        - í…ìŠ¤íŠ¸: í°ìƒ‰
        - í…Œë‘ë¦¬: 1px solid ê²€ì€ìƒ‰

3) ë¸Œëœë“œ í•„í„° ì»¨í…Œì´ë„ˆ
   3-1) ìˆ˜í‰ ìŠ¤í¬ë¡¤ ë ˆì´ì•„ì›ƒ (9ê°œ ë¸Œëœë“œ ëª¨ë‘ ê°€ì‹œ)
   3-2) display: flex, overflow-x: auto
   3-3) ê° ë²„íŠ¼ ê°„ ê°­: 12px
   3-4) ì¢Œìš° íŒ¨ë”©: 20px (ëª¨ë°”ì¼), 40px (ë°ìŠ¤í¬í†±)
   3-5) ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ (ì„ íƒ): scrollbar-width: none

4) ë¸Œëœë“œ ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬
   4-1) handleToggleBrand(brandId: BrandId)
        - toggleBrand(brandId) í˜¸ì¶œ
        - Zustand ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸
   4-2) data-testid="brand-button-{brandId}" ì†ì„± ì¶”ê°€
   4-3) onClick={() => handleToggleBrand(brandId)}

5) ì¹´ë“œ í•„í„°ë§ ë¡œì§ (ë‹¤ì¤‘ ì„ íƒ)
   5-1) selectedBrandsê°€ ë¹„ì–´ìˆìœ¼ë©´: ëª¨ë“  ì¹´ë“œ í‘œì‹œ
   5-2) selectedBrandsê°€ ìˆìœ¼ë©´: í•´ë‹¹ ë¸Œëœë“œ ì¹´ë“œë§Œ í•„í„°ë§
        - filteredCards = allCards.filter(card => selectedBrands.includes(card.brand))
   5-3) ë‹¤ë¥¸ í•„í„°(íƒ­, ê°€ê²©)ì™€ ê²°í•©
        - filteredCards = cards.filter(
            card =>
              (tab ì¡°ê±´) AND
              (selectedBrands.length === 0 || selectedBrands.includes(card.brand)) AND
              (ê°€ê²© ì¡°ê±´)
          )

6) ë¸Œëœë“œë³„ ìƒí’ˆ ê°œìˆ˜ í‘œì‹œ (ì„ íƒì‚¬í•­)
   6-1) ê° ë²„íŠ¼ í•˜ë‹¨ì— ê°œìˆ˜ í‘œì‹œ: "Apple (24)"
   6-2) ë˜ëŠ” ë°°ì§€ë¡œ í‘œì‹œ

7) ë¦¬ì…‹ ë²„íŠ¼ (ì„ íƒì‚¬í•­)
   7-1) "ì „ì²´ ë³´ê¸°" ë²„íŠ¼ìœ¼ë¡œ ëª¨ë“  í•„í„° í•´ì œ
   7-2) ë˜ëŠ” x ë²„íŠ¼ ì¶”ê°€ (ì„ íƒ ë¸Œëœë“œ í•´ì œ)

8) Props & Types
```typescript
interface UseBrandFilterReturn {
  selectedBrands: BrandId[];
  toggleBrand: (brandId: BrandId) => void;
  resetBrands: () => void;
  filteredCards: PhoneCardItem[];
  brands: BrandItem[];
}

interface BrandButtonProps {
  brand: BrandItem;
  isSelected: boolean;
  count?: number;
  onClick: () => void;
}

interface BrandFilterProps {
  className?: string;
  onBrandChange?: (brands: BrandId[]) => void;
}
```

9) êµ¬í˜„ ì˜ˆì‹œ êµ¬ì¡°
```typescript
// hook
export const useBrandFilter = () => {
  const selectedBrands = usePhoneListStore(state => state.selectedBrands);
  const toggleBrand = usePhoneListStore(state => state.toggleBrand);
  const allCards = usePhoneListStore(state => state.allCards);

  const filteredCards = useMemo(
    () => {
      if (selectedBrands.length === 0) return allCards;
      return allCards.filter(card => selectedBrands.includes(card.brand as BrandId));
    },
    [selectedBrands, allCards]
  );

  const brands = BRANDS.map(brand => ({
    ...brand,
    isSelected: selectedBrands.includes(brand.id),
    count: allCards.filter(c => c.brand === brand.id).length
  }));

  return { selectedBrands, toggleBrand, filteredCards, brands };
};

// component
export const BrandFilter = () => {
  const { brands, toggleBrand } = useBrandFilter();

  return (
    <div className={styles.brandFilterContainer}>
      {brands.map(brand => (
        <BrandButton
          key={brand.id}
          data-testid={`brand-button-${brand.id}`}
          brand={brand}
          onClick={() => toggleBrand(brand.id)}
        />
      ))}
    </div>
  );
};
```

10) ì¶”ê°€ ê³ ë ¤ì‚¬í•­
    10-1) URL ë™ê¸°í™”: Task14 ì°¸ê³  (?brand=apple,samsung)
    10-2) ìˆœì„œ ë³´ì¡´: selectedBrands ë°°ì—´ ìˆœì„œ ê´€ë¦¬
    10-3) ë¡œì»¬ìŠ¤í† ë¦¬ì§€: ë§ˆì§€ë§‰ ì„ íƒ ë¸Œëœë“œ ì €ì¥ (ì„ íƒ)

==================================================