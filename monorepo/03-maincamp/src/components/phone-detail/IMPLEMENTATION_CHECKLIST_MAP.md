# Kakao Maps ì§€ë„ ê¸°ëŠ¥ êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

## ğŸ“‹ êµ¬í˜„ ì™„ë£Œ í•­ëª©

### âœ… 1. ì¡°ê±´ ì ìš© ì‚¬í•­

#### 1.1 ì»¤ì„œë£° ì ìš©
- âœ… `@01-common.mdc` ê·œì¹™ ì¤€ìˆ˜
- âœ… `@02-wireframe.mdc` ê·œì¹™ ì¤€ìˆ˜
- âœ… `@03-ui.mdc` ê·œì¹™ ì¤€ìˆ˜

#### 1.2 íŒŒì¼ ê²½ë¡œ
- âœ… TSX íŒŒì¼ êµ¬í˜„: `src/components/phone-detail/index.tsx`
- âœ… CSS íŒŒì¼ êµ¬í˜„: `src/components/phone-detail/styles.module.css`
- âœ… Hook íŒŒì¼ ìƒì„±: `src/components/phone-detail/hooks/index.map.hook.ts`

#### 1.3 ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬
- âœ… Kakao Maps API ê³µì‹ SDK ì‚¬ìš©
- âœ… í™˜ê²½ë³€ìˆ˜ `NEXT_PUBLIC_KAKAO_MAP_API_KEY`ì—ì„œ API í‚¤ ë¡œë“œ
- âœ… ìŠ¤í¬ë¦½íŠ¸ ë™ì  ë¡œë“œ êµ¬í˜„ (useEffect ë‚´ë¶€)
- âœ… ì¤‘ë³µ ë¡œë“œ ë°©ì§€ ë¡œì§ êµ¬í˜„

---

### âœ… 2. í•µì‹¬ ìš”êµ¬ì‚¬í•­ - ì§€ë„ í‘œì‹œ ì¡°ê±´ ë° ì´ˆê¸°í™”

#### 2.1 ì§€ë„ í‘œì‹œ ì¡°ê±´
- âœ… latitudeì™€ longitude ë°ì´í„° ì¡´ì¬ ì‹œ ì§€ë„ ì„¹ì…˜ í‘œì‹œ
- âœ… ì¢Œí‘œ ìœ íš¨ì„± ê²€ì¦ í•¨ìˆ˜ êµ¬í˜„ (`validateCoordinates`)
  - ìœ„ë„: -90 ~ 90 ë²”ìœ„ ê²€ì¦
  - ê²½ë„: -180 ~ 180 ë²”ìœ„ ê²€ì¦
  - null/NaN ê°’ ì²˜ë¦¬
- âœ… ë°ì´í„° ì—†ì„ ê²½ìš° "ë“±ë¡ëœ ìœ„ì¹˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€ í‘œì‹œ
- âœ… ì¡°ê±´ë¶€ ë Œë”ë§ìœ¼ë¡œ ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€ ì²˜ë¦¬

#### 2.2 ì§€ë„ ì´ˆê¸°í™” ë¡œì§
- âœ… ì¢Œí‘œë¥¼ Kakao Maps ì§€ë„ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ì •
- âœ… ì¤Œ ë ˆë²¨ 5 ì ìš© (ì•½ 1km ë²”ìœ„)
- âœ… ë§ˆì»¤ ì¢Œí‘œì— í‘œì‹œ
- âœ… ì£¼ì†Œ ì •ë³´ í¬í•¨ (address + address_detail)

#### 2.3 ë§ˆì»¤ í‘œì‹œ
- âœ… latitude/longitudeì— ë§ˆì»¤ í‘œì‹œ
- âœ… ë§ˆì»¤ í´ë¦­ ì‹œ ì£¼ì†Œ ì •ë³´ InfoWindow íŒì—… í‘œì‹œ
- âœ… InfoWindow í† ê¸€ ê¸°ëŠ¥ (í´ë¦­ ì‹œ ì—´ê¸°/ë‹«ê¸°)
- âœ… data-testid ì†ì„± ì¶”ê°€: "phone-detail-map-marker"

---

### âœ… 3. í•µì‹¬ ìš”êµ¬ì‚¬í•­ - ì§€ë„ UI êµ¬ì¡°

#### 3.1 ì„¹ì…˜ ì œëª©
- âœ… ì„¹ì…˜ ì œëª©: "ê±°ë˜ í¬ë§ ì§€ì—­"
- âœ… className: `sectionTitle`

#### 3.2 ì§€ë„ ì»¨í…Œì´ë„ˆ
- âœ… ID: "kakaoMap" (Kakao API ì´ˆê¸°í™”ìš©)
- âœ… data-testid: "phone-detail-map-container"
- âœ… Kakao Maps ë Œë”ë§ ì˜ì—­ ì§€ì • (ref ì‚¬ìš©)

#### 3.3 ì£¼ì†Œ í…ìŠ¤íŠ¸ í‘œì‹œ
- âœ… ì§€ë„ ì•„ë˜ ì¶”ê°€ ì •ë³´ ì˜ì—­
- âœ… data-testid: "phone-detail-map-address"
- âœ… address + address_detail ê²°í•©í•˜ì—¬ í‘œì‹œ

---

### âœ… 4. í•µì‹¬ ìš”êµ¬ì‚¬í•­ - ìŠ¤íƒ€ì¼ ì ìš©

#### 4.1 ì§€ë„ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼
- âœ… ë„ˆë¹„: 100% (max-width: 844px)
- âœ… ë†’ì´: 380px (ë°ìŠ¤í¬í†±)
- âœ… í…Œë‘ë¦¬: 1px solid #e4e4e4
- âœ… ë°°ê²½ìƒ‰: #f0f0f0
- âœ… í…Œë‘ë¦¬ ë°˜ê²½: 16px
- âœ… ì„¹ì…˜ ì¼ê´€ì„± ìœ ì§€ (gap: 16px)

#### 4.2 ì£¼ì†Œ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼
- âœ… í°íŠ¸ í¬ê¸°: 15px
- âœ… ìƒ‰ìƒ: var(--color-dark-gray)
- âœ… í°íŠ¸ íŒ¨ë°€ë¦¬: 'Pretendard Variable'
- âœ… ì—¬ë°±: ì§€ë„ ì•„ë˜ 8px ë§ˆì§„

#### 4.3 ë¡œë”© ë° ì—ëŸ¬ ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼
- âœ… ë¡œë”© ì˜¤ë²„ë ˆì´: ì¤‘ì•™ ì •ë ¬, íšŒìƒ‰ ë°°ê²½ (#f0f0f0)
- âœ… ì—ëŸ¬ ì˜¤ë²„ë ˆì´: ì¤‘ì•™ ì •ë ¬, ì—°í•œ ë¹¨ê°• ë°°ê²½ (#fff5f5)
- âœ… í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼: 16px, medium-gray/error-red

---

### âœ… 5. í•µì‹¬ ìš”êµ¬ì‚¬í•­ - ì—ëŸ¬ í•¸ë“¤ë§ ë° ë°˜ì‘í˜•

#### 5.1 ì—ëŸ¬ ì²˜ë¦¬
- âœ… Kakao Maps API ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì¹œì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- âœ… ì¢Œí‘œ ë°ì´í„° ì—†ì„ ë•Œ ì„¹ì…˜ ìˆ¨ê¹€ ë˜ëŠ” "ë“±ë¡ëœ ìœ„ì¹˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤" í‘œì‹œ
- âœ… ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì—ëŸ¬ ì²˜ë¦¬ (Promise reject)
- âœ… ì§€ë„ ì´ˆê¸°í™” ì—ëŸ¬ ì²˜ë¦¬ (try-catch)
- âœ… ì—ëŸ¬ ìƒíƒœ ê´€ë¦¬ (mapError state)

#### 5.2 ë°˜ì‘í˜• ì²˜ë¦¬
- âœ… ë°ìŠ¤í¬í†±: 380px ë†’ì´, 844px ìµœëŒ€ ë„ˆë¹„
- âœ… íƒœë¸”ë¦¿ (max-width: 1280px): 320px ë†’ì´, 100% ë„ˆë¹„
- âœ… ëª¨ë°”ì¼ (max-width: 768px): 280px ë†’ì´, 12px í…Œë‘ë¦¬ ë°˜ê²½
- âœ… ì£¼ì†Œ í…ìŠ¤íŠ¸ ëª¨ë°”ì¼ í¬ê¸° ì¡°ì • (14px)

---

### âœ… 6. í•µì‹¬ ìš”êµ¬ì‚¬í•­ - Hook êµ¬ì¡° ì„¤ê³„

#### 6.1 Hook íŒŒì¼ ìƒì„±
- âœ… íŒŒì¼ ê²½ë¡œ: `src/components/phone-detail/hooks/index.map.hook.ts`
- âœ… Hook ì´ë¦„: `useKakaoMap`

#### 6.2 Hook ì—­í•  ë° ê¸°ëŠ¥
- âœ… ì¢Œí‘œ ìœ íš¨ì„± ê²€ì‚¬ (`validateCoordinates` í•¨ìˆ˜)
- âœ… ë§ˆì»¤ ìƒì„± ë¡œì§ ë¶„ë¦¬ (markerRef)
- âœ… InfoWindow ìƒì„± ë¡œì§ ë¶„ë¦¬ (infoWindowRef)
- âœ… ì§€ë„ ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬ (mapInstanceRef)
- âœ… ë¡œë”©/ì—ëŸ¬ ìƒíƒœ ê´€ë¦¬ (isMapLoaded, mapError)
- âœ… Cleanup ë¡œì§ êµ¬í˜„ (useEffect return)

#### 6.3 Hook ë°˜í™˜ê°’
- âœ… `mapContainerRef`: ì§€ë„ ì»¨í…Œì´ë„ˆ DOM ì°¸ì¡°
- âœ… `isMapLoaded`: ì§€ë„ ë¡œë“œ ì™„ë£Œ ì—¬ë¶€
- âœ… `mapError`: ì—ëŸ¬ ë©”ì‹œì§€
- âœ… `isValidCoordinates`: ì¢Œí‘œ ìœ íš¨ì„± ì—¬ë¶€
- âœ… `markerRef`: ë§ˆì»¤ ê°ì²´ ì°¸ì¡°
- âœ… `infoWindowRef`: InfoWindow ê°ì²´ ì°¸ì¡°

#### 6.4 ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„
- âœ… Hook êµ¬ì¡°ë¡œ í´ë¦­ â†’ Kakao Maps ë§í¬ ì—´ê¸° ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥
- âœ… ê¸°ì¡´ `useMapLink` í›…ê³¼ ì—°ë™ ê°€ëŠ¥

---

### âœ… 7. ì¶”ê°€ êµ¬í˜„ ì‚¬í•­

#### 7.1 ë°ì´í„° íƒ€ì… í™•ì¥
- âœ… `PhoneDetailData` ì¸í„°í˜ì´ìŠ¤ì— `latitude`, `longitude` í•„ë“œ ì¶”ê°€
- âœ… `useFetchDetail` í›…ì—ì„œ ì¢Œí‘œ ë°ì´í„° ì²˜ë¦¬
- âœ… ë”ë¯¸ ë°ì´í„°ì™€ ì‹¤ì œ Supabase ë°ì´í„° ëª¨ë‘ ì§€ì›

#### 7.2 ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ìµœì í™”
- âœ… ì¤‘ë³µ ë¡œë“œ ë°©ì§€ (ì „ì—­ ìƒíƒœ ê´€ë¦¬)
- âœ… ë¡œë”© ì¤‘ì¼ ë•Œ ì½œë°± í í™œìš©
- âœ… ì´ë¯¸ ë¡œë“œëœ ê²½ìš° ì¦‰ì‹œ resolve

#### 7.3 ì ‘ê·¼ì„± ë° ì‚¬ìš©ì„±
- âœ… ë§ˆì»¤ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
- âœ… InfoWindow í† ê¸€ ê¸°ëŠ¥
- âœ… ì¹œì ˆí•œ ë¡œë”©/ì—ëŸ¬ ë©”ì‹œì§€

---

## ğŸ“Š êµ¬í˜„ ê²°ê³¼ ìš”ì•½

| ì¹´í…Œê³ ë¦¬ | êµ¬í˜„ í•­ëª© ìˆ˜ | ì™„ë£Œ í•­ëª© ìˆ˜ | ì™„ë£Œìœ¨ |
|---------|------------|------------|--------|
| ì¡°ê±´ ì ìš© | 7 | 7 | 100% |
| ì§€ë„ í‘œì‹œ ë° ì´ˆê¸°í™” | 10 | 10 | 100% |
| UI êµ¬ì¡° | 5 | 5 | 100% |
| ìŠ¤íƒ€ì¼ ì ìš© | 9 | 9 | 100% |
| ì—ëŸ¬ í•¸ë“¤ë§ ë° ë°˜ì‘í˜• | 10 | 10 | 100% |
| Hook êµ¬ì¡° ì„¤ê³„ | 12 | 12 | 100% |
| ì¶”ê°€ êµ¬í˜„ | 7 | 7 | 100% |
| **ì „ì²´** | **60** | **60** | **100%** |

---

## ğŸ¯ í…ŒìŠ¤íŠ¸ ê¶Œì¥ ì‚¬í•­

### ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

1. **ì •ìƒ ì¢Œí‘œ ë°ì´í„° í…ŒìŠ¤íŠ¸**
   - latitude, longitudeê°€ ìœ íš¨í•œ ê²½ìš°
   - ì§€ë„ê°€ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
   - ë§ˆì»¤ê°€ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— í‘œì‹œë˜ëŠ”ì§€ í™•ì¸

2. **ë§ˆì»¤ í´ë¦­ í…ŒìŠ¤íŠ¸**
   - ë§ˆì»¤ í´ë¦­ ì‹œ InfoWindow í‘œì‹œ í™•ì¸
   - ë‹¤ì‹œ í´ë¦­ ì‹œ InfoWindow ë‹«í˜ í™•ì¸
   - ì£¼ì†Œ ì •ë³´ê°€ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸

3. **ì¢Œí‘œ ì—†ìŒ í…ŒìŠ¤íŠ¸**
   - latitude ë˜ëŠ” longitudeê°€ nullì¸ ê²½ìš°
   - "ë“±ë¡ëœ ìœ„ì¹˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€ í‘œì‹œ í™•ì¸

4. **ì—ëŸ¬ í•¸ë“¤ë§ í…ŒìŠ¤íŠ¸**
   - API í‚¤ ì—†ì„ ë•Œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ í™•ì¸
   - ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ì²˜ë¦¬ í™•ì¸

5. **ë°˜ì‘í˜• í…ŒìŠ¤íŠ¸**
   - ë°ìŠ¤í¬í†±, íƒœë¸”ë¦¿, ëª¨ë°”ì¼ í™”ë©´ í¬ê¸° í™•ì¸
   - ê° ë¸Œë ˆì´í¬í¬ì¸íŠ¸ì—ì„œ ì§€ë„ í¬ê¸° ì¡°ì • í™•ì¸

### Playwright í…ŒìŠ¤íŠ¸ ì‘ì„± ê¶Œì¥

```typescript
// í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì˜ˆì‹œ
test('ì§€ë„ê°€ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸', async ({ page }) => {
  // latitude, longitudeê°€ ìˆëŠ” phoneIdë¡œ ì´ë™
  await page.goto('/phone-detail/test-phone-id');
  
  // ì§€ë„ ì»¨í…Œì´ë„ˆ í™•ì¸
  const mapContainer = page.locator('[data-testid="phone-detail-map-container"]');
  await expect(mapContainer).toBeVisible();
  
  // ì£¼ì†Œ ì •ë³´ í™•ì¸
  const address = page.locator('[data-testid="phone-detail-map-address"]');
  await expect(address).toBeVisible();
});
```

---

## ğŸ“ êµ¬í˜„ ì™„ë£Œ ì‹œì 

- **êµ¬í˜„ ì™„ë£Œ ë‚ ì§œ**: 2025-11-19
- **êµ¬í˜„ ë°©ì‹**: Kakao Maps API + Custom Hook (useKakaoMap)
- **íŒŒì¼ ë³€ê²½ ìˆ˜**: 4ê°œ
  - `index.tsx` (ì§€ë„ ë Œë”ë§ ë¡œì§ ì¶”ê°€)
  - `styles.module.css` (ì§€ë„ ìŠ¤íƒ€ì¼ ì¶”ê°€)
  - `hooks/index.map.hook.ts` (ì‹ ê·œ ìƒì„±)
  - `hooks/index.fetch-detail.hook.ts` (íƒ€ì… í™•ì¥)

