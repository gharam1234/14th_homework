<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±ê¸°</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 600px;
      width: 100%;
    }
    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }
    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }
    .input-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 8px;
      color: #555;
      font-weight: 600;
    }
    input {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s;
    }
    input:focus {
      outline: none;
      border-color: #667eea;
    }
    .button-group {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    button {
      flex: 1;
      padding: 14px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
    }
    .btn-danger {
      background: #ef4444;
      color: white;
    }
    .btn-danger:hover {
      background: #dc2626;
      transform: translateY(-2px);
    }
    .btn-secondary {
      background: #6b7280;
      color: white;
    }
    .btn-secondary:hover {
      background: #4b5563;
      transform: translateY(-2px);
    }
    .output {
      background: #f9fafb;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      padding: 20px;
      min-height: 200px;
      max-height: 300px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.6;
      color: #374151;
    }
    .log-success { color: #059669; font-weight: 600; }
    .log-error { color: #dc2626; font-weight: 600; }
    .log-info { color: #3b82f6; }
    .stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }
    .stat-card {
      background: #f3f4f6;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
    }
    .stat-value {
      font-size: 24px;
      font-weight: 700;
      color: #667eea;
      margin-bottom: 5px;
    }
    .stat-label {
      font-size: 12px;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¨ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±ê¸°</h1>
    <p class="subtitle">í˜ì´ì§€ë„¤ì´ì…˜ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ëª© ë°ì´í„°ë¥¼ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ìƒì„±í•©ë‹ˆë‹¤.</p>
    
    <div class="stats">
      <div class="stat-card">
        <div class="stat-value" id="currentCount">0</div>
        <div class="stat-label">í˜„ì¬ ë°ì´í„°</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="storageSize">0 KB</div>
        <div class="stat-label">ìš©ëŸ‰</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="pageCount">0</div>
        <div class="stat-label">í˜ì´ì§€ ìˆ˜</div>
      </div>
    </div>

    <div class="input-group">
      <label for="dataCount">ìƒì„±í•  ë°ì´í„° ê°œìˆ˜</label>
      <input type="number" id="dataCount" value="100" min="1" max="1000" placeholder="ì˜ˆ: 100">
    </div>

    <div class="button-group">
      <button class="btn-primary" onclick="generateData()">âœ¨ ë°ì´í„° ìƒì„±</button>
      <button class="btn-danger" onclick="clearData()">ğŸ—‘ï¸ ë°ì´í„° ì‚­ì œ</button>
    </div>

    <button class="btn-secondary" onclick="checkData()" style="width: 100%; margin-bottom: 20px;">
      ğŸ“Š í˜„ì¬ ë°ì´í„° í™•ì¸
    </button>

    <div class="output" id="output">
      <div class="log-info">ğŸ’¡ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë°ì´í„°ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ì‚­ì œí•˜ì„¸ìš”.</div>
    </div>
  </div>

  <script>
    const STORAGE_KEY = 'test_phones_pagination_data';
    const PAGE_SIZE = 10;

    // ë°ì´í„° ëª¨ë¸ ë° ì˜µì…˜
    const models = [
      { name: 'iPhone', variants: ['14 Pro', '15 Pro', '15 Pro Max', '16', '16 Pro'], brand: 'apple' },
      { name: 'Galaxy', variants: ['S23', 'S23 Ultra', 'S24', 'S24 Ultra', 'Note20'], brand: 'samsung' },
      { name: 'Pixel', variants: ['7', '7 Pro', '8', '8 Pro'], brand: 'google' },
      { name: 'Nothing Phone', variants: ['1', '2'], brand: 'nothing' },
      { name: 'Xperia', variants: ['5', '10', '1'], brand: 'sony' },
    ];

    const storageOptions = ['128GB', '256GB', '512GB', '1TB'];
    const conditions = ['Sê¸‰', 'Aê¸‰', 'Bê¸‰', 'Cê¸‰'];
    const saleStates = ['available', 'reserved', 'sold'];
    const addresses = [
      'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬',
      'ì„œìš¸ì‹œ ë§ˆí¬êµ¬',
      'ì„œìš¸ì‹œ ì„œì´ˆêµ¬',
      'ì„œìš¸ì‹œ ì†¡íŒŒêµ¬',
      'ì„œìš¸ì‹œ ì¢…ë¡œêµ¬',
      'ê²½ê¸°ë„ ì„±ë‚¨ì‹œ',
      'ê²½ê¸°ë„ ìˆ˜ì›ì‹œ',
      'ì¸ì²œê´‘ì—­ì‹œ',
      'ë¶€ì‚°ê´‘ì—­ì‹œ',
      'ëŒ€êµ¬ê´‘ì—­ì‹œ',
    ];

    const imageUrls = [
      'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=640&h=480&fit=crop',
      'https://images.unsplash.com/photo-1580898434531-5700dde6756c?w=640&h=480&fit=crop',
      'https://images.unsplash.com/photo-1510557880182-3f8c5fed2fa8?w=640&h=480&fit=crop',
      'https://images.unsplash.com/photo-1451188502541-13943edb6acb?w=640&h=480&fit=crop',
      'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=640&h=480&fit=crop',
    ];

    // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
    function getRandomElement(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    function getRandomPrice() {
      return Math.floor(Math.random() * 1500000) + 500000;
    }

    function generateUUID() {
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
        const r = Math.random() * 16 | 0;
        const v = c === 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
      });
    }

    // ê°œë³„ ì „í™”ê¸° ë°ì´í„° ìƒì„±
    function generateLocalPhoneData(index) {
      const model = getRandomElement(models);
      const variant = getRandomElement(model.variants);
      const storage = getRandomElement(storageOptions);
      const condition = getRandomElement(conditions);
      const saleState = getRandomElement(saleStates);
      const address = getRandomElement(addresses);
      const price = getRandomPrice();
      
      const now = new Date();
      const daysAgo = 100 - index;
      const createdAt = new Date(now.getTime() - daysAgo * 24 * 60 * 60 * 1000);

      const modelName = model.name + ' ' + variant;
      const title = modelName + ' ' + storage;
      
      return {
        id: generateUUID(),
        title: title,
        price: price,
        currency: 'KRW',
        categories: [model.brand, 'phone'],
        sale_state: saleState,
        available_from: createdAt.toISOString(),
        available_until: null,
        main_image_url: getRandomElement(imageUrls),
        model_name: modelName,
        storage_capacity: storage,
        device_condition: condition,
        address: address,
        tags: [model.brand, condition.toLowerCase(), 'ì§ê±°ë˜'],
        created_at: createdAt.toISOString(),
      };
    }

    // ë©”ì¸ ë°ì´í„° ìƒì„± í•¨ìˆ˜
    function generateLocalTestData(count) {
      count = count || 100;
      console.log('ğŸš€ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ìš© í…ŒìŠ¤íŠ¸ ë°ì´í„° ' + count + 'ê°œ ìƒì„± ì‹œì‘...\n');

      const phones = [];
      
      for (let i = 0; i < count; i++) {
        phones.push(generateLocalPhoneData(i));
      }
      
      try {
        const dataJson = JSON.stringify(phones);
        localStorage.setItem(STORAGE_KEY, dataJson);
        
        console.log('âœ… ì„±ê³µ: ' + count + 'ê°œì˜ í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        console.log('   ì €ì¥ í‚¤: ' + STORAGE_KEY);
        console.log('   ë°ì´í„° í¬ê¸°: ' + (dataJson.length / 1024).toFixed(2) + ' KB');
        console.log('\nğŸ’¡ ì‚¬ìš©ë²•:');
        console.log('   1. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”.');
        console.log('   2. /phones í˜ì´ì§€ì—ì„œ í˜ì´ì§€ë„¤ì´ì…˜ í…ŒìŠ¤íŠ¸');
        console.log('\nğŸ§¹ ì‚­ì œ ë°©ë²•:');
        console.log('   localStorage.removeItem("' + STORAGE_KEY + '")');
        
        return phones;
      } catch (error) {
        console.error('âŒ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì €ì¥ ì‹¤íŒ¨:', error);
        console.error('   ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ìš©ëŸ‰ ì œí•œì„ ì´ˆê³¼í–ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
        return null;
      }
    }

    function log(message, type = 'info') {
      const output = document.getElementById('output');
      const div = document.createElement('div');
      div.className = 'log-' + type;
      div.textContent = message;
      output.appendChild(div);
      output.scrollTop = output.scrollHeight;
    }

    function clearOutput() {
      document.getElementById('output').innerHTML = '';
    }

    function updateStats() {
      const data = localStorage.getItem(STORAGE_KEY);
      if (data) {
        const phones = JSON.parse(data);
        document.getElementById('currentCount').textContent = phones.length;
        document.getElementById('storageSize').textContent = 
          (data.length / 1024).toFixed(2) + ' KB';
        document.getElementById('pageCount').textContent = 
          Math.ceil(phones.length / PAGE_SIZE);
      } else {
        document.getElementById('currentCount').textContent = '0';
        document.getElementById('storageSize').textContent = '0 KB';
        document.getElementById('pageCount').textContent = '0';
      }
    }

    function generateData() {
      clearOutput();
      const count = parseInt(document.getElementById('dataCount').value) || 100;
      
      log('ğŸš€ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ì‹œì‘...', 'info');
      log(`   ìƒì„± ê°œìˆ˜: ${count}ê°œ`, 'info');
      
      try {
        const result = generateLocalTestData(count);
        if (result) {
          log(`âœ… ${count}ê°œì˜ ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success');
          log(`   ì €ì¥ ìœ„ì¹˜: localStorage['${STORAGE_KEY}']`, 'info');
          updateStats();
        } else {
          log('âŒ ë°ì´í„° ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
        }
      } catch (error) {
        log('âŒ ì—ëŸ¬: ' + error.message, 'error');
      }
    }

    function clearData() {
      clearOutput();
      log('ğŸ§¹ ë°ì´í„° ì‚­ì œ ì¤‘...', 'info');
      
      const existingData = localStorage.getItem(STORAGE_KEY);
      if (!existingData) {
        log('â„¹ï¸  ì‚­ì œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.', 'info');
        return;
      }

      localStorage.removeItem(STORAGE_KEY);
      log('âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
      updateStats();
    }

    function checkData() {
      clearOutput();
      log('ğŸ“Š í˜„ì¬ ë°ì´í„° í™•ì¸ ì¤‘...', 'info');
      
      const data = localStorage.getItem(STORAGE_KEY);
      if (!data) {
        log('â„¹ï¸  ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.', 'info');
        return;
      }

      try {
        const phones = JSON.parse(data);
        log(`âœ“ ì´ ë°ì´í„° ìˆ˜: ${phones.length}ê°œ`, 'success');
        log(`âœ“ ë°ì´í„° í¬ê¸°: ${(data.length / 1024).toFixed(2)} KB`, 'success');
        log(`âœ“ ì˜ˆìƒ í˜ì´ì§€ ìˆ˜: ${Math.ceil(phones.length / PAGE_SIZE)}í˜ì´ì§€ (í˜ì´ì§€ë‹¹ ${PAGE_SIZE}ê°œ)`, 'success');
        log('', 'info');
        log('ì²« ë²ˆì§¸ ë°ì´í„° ìƒ˜í”Œ:', 'info');
        log(JSON.stringify(phones[0], null, 2), 'info');
      } catch (error) {
        log('âŒ ë°ì´í„° íŒŒì‹± ì—ëŸ¬: ' + error.message, 'error');
      }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ìƒíƒœ í‘œì‹œ
    window.addEventListener('load', () => {
      updateStats();
      log('âœ¨ ë¡œì»¬ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±ê¸°ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
      log('ğŸ’¡ ìœ„ì˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ì„¸ìš”.', 'info');
    });
  </script>
</body>
</html>